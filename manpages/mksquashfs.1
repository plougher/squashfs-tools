.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.47.5.
.TH MKSQUASHFS "1" "February 2022" "mksquashfs version 4.5-5f66b8b" "User Commands"
.SH NAME
mksquashfs - tool to create and append to squashfs filesystems
.SH SYNOPSIS
.B mksquashfs
\fI\,source1 source2 \/\fR...  \fI\,dest \/\fR[\fI\,options\/\fR] [\fI\,-e list of exclude dirs/files\/\fR]
.SH DESCRIPTION
Squashfs is a highly compressed read-only filesystem for Linux.
It uses either gzip/xz/lzo/lz4/zstd compression to compress both files, inodes
and directories.  Inodes in the system are very small and all blocks are
packed to minimise data overhead. Block sizes greater than 4K are supported
up to a maximum of 1Mbytes (default block size 128K).

Squashfs is intended for general read-only filesystem use, for archival
use (i.e. in cases where a .tar.gz file may be used), and in constrained
block device/memory systems (e.g. embedded systems) where low overhead is
needed.
.SH OPTIONS
.SS "Filesystem build options:"
.TP
\fB\-tar\fR
read uncompressed tar file from standard in (stdin).
.TP
\fB\-no\-strip\fR
act like tar, and do not strip leading directories from source files.
.TP
\fB\-tarstyle\fR
alternative name for \fB\-no\-strip\fR.
.TP
\fB\-cpiostyle\fR
act like cpio, and read files from standard in (stdin).
.TP
\fB\-cpiostyle0\fR
like \fB\-cpiostyle\fR, but filenames are null terminated.
.TP
\fB\-comp\fR COMP
select COMP compression. Compressors available: gzip (default), lzo, lz4, xz, zstd.
.TP
\fB\-b\fR BLOCK_SIZE
set data block to BLOCK_SIZE.  Default 128 Kbytes. Optionally a suffix of K or M can be given to specify Kbytes or Mbytes respectively.
.TP
\fB\-reproducible\fR
build images that are reproducible (default).
.TP
\fB\-not\-reproducible\fR
build images that are not reproducible.
.TP
\fB\-mkfs\-time\fR TIME
set filesystem creation timestamp to TIME, which is an unsigned 32\-bit int indicating seconds since the epoch (1970\-01\-01).
.TP
\fB\-fstime\fR TIME
synonym for mkfs\-time.
.TP
\fB\-all\-time\fR TIME
set all file timestamps to TIME, which is an unsigned 32\-bit int indicating seconds since the epoch (1970\-01\-01).
.TP
\fB\-no\-exports\fR
don't make filesystem exportable via NFS (\fB\-tar\fR default).
.TP
\fB\-exports\fR
make filesystem exportable via NFS (default).
.TP
\fB\-no\-sparse\fR
don't detect sparse files.
.TP
\fB\-no\-xattrs\fR
don't store extended attributes.
.TP
\fB\-xattrs\fR
store extended attributes (default).
.TP
\fB\-noI\fR
do not compress inode table.
.TP
\fB\-noId\fR
do not compress the uid/gid table (implied by \fB\-noI\fR).
.TP
\fB\-noD\fR
do not compress data blocks.
.TP
\fB\-noF\fR
do not compress fragment blocks.
.TP
\fB\-noX\fR
do not compress extended attributes.
.TP
\fB\-no\-tailends\fR
don't pack tail ends into fragments (default).
.TP
\fB\-tailends\fR
pack tail ends into fragments.
.TP
\fB\-no\-fragments\fR
do not use fragments.
.TP
\fB\-always\-use\-fragments\fR
use fragment blocks for files larger than block size.
.TP
\fB\-no\-duplicates\fR
do not perform duplicate checking.
.TP
\fB\-no\-hardlinks\fR
do not hardlink files, instead store duplicates.
.TP
\fB\-all\-root\fR
make all files owned by root.
.TP
\fB\-root\-time\fR TIME
set root directory time to TIME.
.TP
\fB\-root\-mode\fR MODE
set root directory permissions to octal MODE.
.TP
\fB\-root\-uid\fR UID
set root directory owner to UID.
.TP
\fB\-root\-gid\fR GID
set root directory group to GID.
.TP
\fB\-force\-uid\fR UID
set all file uids to UID.
.TP
\fB\-force\-gid\fR GID
set all file gids to GID.
.TP
\fB\-keep\-as\-directory\fR
if one source directory is specified, create a root directory containing that directory, rather than the contents of the directory.
.TP
\fB\-action\fR ACTION@EXPRESSION
evaluate EXPRESSION on every file, and execute ACTION if it returns TRUE.
.TP
\fB\-log\-action\fR ACTION@EXPRESSION
as above, but log expression evaluation results and actions performed.
.TP
\fB\-true\-action\fR ACTION@EXPRESSION
as above, but only log expressions which return TRUE.
.TP
\fB\-false\-action\fR ACTION@EXPRESSION
as above, but only log expressions which return FALSE.
.TP
\fB\-action\-file\fR FILE
as action, but read actions from FILE.
.TP
\fB\-log\-action\-file\fR FILE
as \fB\-log\-action\fR, but read actions from FILE.
.TP
\fB\-true\-action\-file\fR FILE
as \fB\-true\-action\fR, but read actions from FILE.
.TP
\fB\-false\-action\-file\fR FILE
as \fB\-false\-action\fR, but read actions from FILE.
.SS "Filesystem filter options:"
.TP
\fB\-p\fR PSEUDO\-DEFINITION
Add pseudo file definition.
.TP
\fB\-pf\fR PSEUDO\-FILE
Add list of pseudo file definitions.
.TP
\fB\-sort\fR SORT_FILE
sort files according to priorities in SORT_FILE.  One file or dir with priority per line.  Priority \fB\-32768\fR to 32767, default priority 0.
.TP
\fB\-ef\fR EXCLUDE_FILE
list of exclude dirs/files.  One per line.
.TP
\fB\-wildcards\fR
Allow extended shell wildcards (globbing) to be used in exclude dirs/files.
.TP
\fB\-regex\fR
Allow POSIX regular expressions to be used in exclude dirs/files.
.TP
\fB\-one\-file\-system\fR
Do not cross filesystem boundaries when scanning sources.
.SS "Filesystem append options:"
.TP
\fB\-noappend\fR
do not append to existing filesystem.
.TP
\fB\-root\-becomes\fR NAME
when appending source files/directories, make the original root become a subdirectory in the new root called NAME, rather than adding the new source items to the original root.
.SS "Mksquashfs runtime options:"
.TP
\fB\-version\fR
print version, licence and copyright message.
.TP
\fB\-exit\-on\-error\fR
treat normally ignored errors as fatal.
.TP
\fB\-recover\fR NAME
recover filesystem data using recovery file NAME.
.TP
\fB\-no\-recovery\fR
don't generate a recovery file.
.TP
\fB\-recovery\-path\fR NAME
use NAME as the directory to store the recovery file.
.TP
\fB\-quiet\fR
no verbose output.
.TP
\fB\-info\fR
print files written to filesystem.
.TP
\fB\-no\-progress\fR
don't display the progress bar.
.TP
\fB\-progress\fR
display progress bar when using the \fB\-info\fR option.
.TP
\fB\-throttle\fR PERCENTAGE
throttle the I/O input rate by the given percentage. This can be used to reduce the I/O and CPU consumption of Mksquashfs.
.TP
\fB\-limit\fR PERCENTAGE
limit the I/O input rate to the given percentage. This can be used to reduce the I/O and CPU consumption of Mksquashfs (alternative to \fB\-throttle\fR).
.TP
\fB\-processors\fR NUMBER
Use NUMBER processors.  By default will use number of processors available.
.TP
\fB\-mem\fR SIZE
Use SIZE physical memory. Optionally a suffix of K, M or G can be given to specify Kbytes, Mbytes or Gbytes respectively.
.SS "Expert options (these may make the filesystem unmountable):"
.TP
\fB\-nopad\fR
do not pad filesystem to a multiple of 4K.
.TP
\fB\-offset\fR OFFSET
Skip OFFSET bytes at the beginning of DEST. Optionally a suffix of K, M or G can be given to specify Kbytes, Mbytes or Gbytes respectively. Default 0 bytes.
.TP
\fB\-o\fR OFFSET
synonym for \fB\-offset\fR.
.SS "Miscellaneous options:"
.TP
\fB\-root\-owned\fR
alternative name for \fB\-all\-root\fR.
.TP
\fB\-noInodeCompression\fR
alternative name for \fB\-noI\fR.
.TP
\fB\-noIdTableCompression\fR
alternative name for \fB\-noId\fR.
.TP
\fB\-noDataCompression\fR
alternative name for \fB\-noD\fR.
.TP
\fB\-noFragmentCompression\fR
alternative name for \fB\-noF\fR.
.TP
\fB\-noXattrCompression\fR
alternative name for \fB\-noX\fR.
.TP
\fB\-help\fR
output this options text to stdout.
.TP
\fB\-h\fR
output this options text to stdout.
.TP
\fB\-Xhelp\fR
print compressor options for selected compressor.
.SH "PSEUDO FILE DEFINITION FORMAT"
.TP
\fB\-p\fR filename d mode uid gid
create a directory.
.TP
\fB\-p\fR filename m mode uid gid
modify filename.
.TP
\fB\-p\fR filename b mode uid gid major minor
create a block device.
.TP
\fB\-p\fR filename c mode uid gid major minor
create a character device.
.TP
\fB\-p\fR filename f mode uid gid command
create file from stdout of command.
.TP
\fB\-p\fR filename s mode uid gid symlink
create a symbolic link.
.TP
\fB\-p\fR filename i mode uid gid [s|f]
create a socket (s) or FIFO (f).
.TP
\fB\-p\fR filename l linkname
create a hard\-link to linkname.
.TP
\fB\-p\fR filename L pseudo_filename
same, but link to pseudo file.
.TP
\fB\-p\fR filename D time mode uid gid
create a directory with timestamp time.
.TP
\fB\-p\fR filename M time mode uid gid
modify a file with timestamp time.
.TP
\fB\-p\fR filename B time mode uid gid major minor
create block device with timestamp time.
.TP
\fB\-p\fR filename C time mode uid gid major minor
create char device with timestamp time.
.TP
\fB\-p\fR filename F time mode uid gid command
create file with timestamp time.
.TP
\fB\-p\fR filename S time mode uid gid symlink
create symlink with timestamp time.
.TP
\fB\-p\fR filename I time mode uid gid [s|f]
create socket/fifo with timestamp time.
.SH "COMPRESSORS AVAILABLE AND COMPRESSOR SPECIFIC OPTIONS"
.SS "gzip (default):"
.TP
\fB\-Xcompression\-level\fR COMPRESSION\-LEVEL
COMPRESSION\-LEVEL should be 1 .. 9 (default 9).
.TP
\fB\-Xwindow\-size\fR WINDOW\-SIZE
WINDOW\-SIZE should be 8 .. 15 (default 15).
.TP
\fB\-Xstrategy\fR strategy1,strategy2,...,strategyN
Compress using strategy1,strategy2,...,strategyN in turn and choose the best compression. Available strategies: default, filtered, huffman_only, run_length_encoded and fixed.
.SS "lzo:"
.TP
\fB\-Xalgorithm\fR ALGORITHM
Where ALGORITHM is one of: lzo1x_1, lzo1x_1_11, lzo1x_1_12, lzo1x_1_15, lzo1x_999 (default).
.TP
\fB\-Xcompression\-level\fR COMPRESSION\-LEVEL
COMPRESSION\-LEVEL should be 1 .. 9 (default 8) Only applies to lzo1x_999 algorithm.
.SS "lz4:"
.TP
\fB\-Xhc\fR
Compress using LZ4 High Compression.
.SS "xz:"
.TP
\fB\-Xbcj\fR filter1,filter2,...,filterN
Compress using filter1,filter2,...,filterN in turn (in addition to no filter), and choose the best compression. Available filters: x86, arm, armthumb, powerpc, sparc, ia64.
.TP
\fB\-Xdict\-size\fR DICT\-SIZE
Use DICT\-SIZE as the XZ dictionary size.  The dictionary size can be specified as a percentage of the block size, or as an absolute value.  The dictionary size must be less than or equal to the block size and 8192 bytes or larger.  It must also be storable in the xz header as either 2^n or as 2^n+2^(n+1). Example dict\-sizes are 75%, 50%, 37.5%, 25%, or 32K, 16K, 8K etc.
.SS "zstd:"
.TP
\fB\-Xcompression\-level\fR COMPRESSION\-LEVEL
COMPRESSION\-LEVEL should be 1 .. 22 (default 15).
.SH ENVIRONMENT
.TP
SOURCE_DATE_EPOCH
If set, this is used as the filesystem creation timestamp.  Also any file timestamps which are after SOURCE_DATE_EPOCH will be clamped to SOURCE_DATE_EPOCH.  See https://reproducible\-builds.org/docs/source\-date\-epoch/ for more information.
.SH AUTHOR
Written by Phillip Lougher <phillip@squashfs.org.uk>
.SH COPYRIGHT
Copyright \(co 2022 Phillip Lougher <phillip@squashfs.org.uk>
.PP
This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2,
or (at your option) any later version.
.PP
This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.SH "SEE ALSO"
The README for the Squash\-tools 4.5 release, describing the new features can be
read here https://github.com/plougher/squashfs\-tools/blob/master/README\-4.5
.PP
The Squashfs\-tools USAGE guide can be read here
https://github.com/plougher/squashfs\-tools/blob/master/USAGE
.PP
The ACTIONS\-README file describing how to use the new actions feature can be
read here https://github.com/plougher/squashfs\-tools/blob/master/ACTIONS\-README
